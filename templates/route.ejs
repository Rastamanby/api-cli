const mongoose = require('mongoose')
const <%= name %> = require('../models/<%= name.toLowerCase() %>')

const get<%= name %>s = (req, res) => {
  const query = <%= name %>.find({})
  query.exec((err, <%= name.toLowerCase() %>s) => (
    err ? res.send(err) : res.json(<%= name.toLowerCase() %>s)
  ))
}

const post<%= name %> = (req, res) => {
  const new<%= name %> = new <%= name %>(req.body)
  new<%= name %>.save((err, <%= name.toLowerCase() %>) => (
    err ? res.send(err) : res.json({
      message: '<%= name %> successfully added!',
      <%= name.toLowerCase() %>
    })
  ))
}

const put<%= name %> = (req, res) => {
  <%= name %>.findById({ _id: req.params.<%= name.toLowerCase() %>Id }, (err, <%= name.toLowerCase() %>) => {
    if (err) res.send(err)
    Object.assign(<%= name.toLowerCase() %>, req.body).save((err, <%= name.toLowerCase() %>) => (
      err ? res.send(err) : res.json({
        message: '<%= name %> updated!',
        <%= name.toLowerCase() %>
      })
    ))
  })
}

module.exports = { get<%= name %>s, post<%= name %>, put<%= name %> }